<template>
  <div class="suggestion">
    <div v-if="recentSearches[0]" class="title">
      <h3>Recent Searches</h3>
    </div>
    <div class="content">
      <ul v-for="item in recentSearches" :key="item" class="recentSearch--wrapper">
        <li>
          <svg viewBox="0 0 50 53" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M49.1579 33.5801C47.8984 39.0088 44.8415 43.8526 40.4832 47.3257C36.1248 50.7987 30.7208 52.6972 25.1479 52.7131C23.2574 52.7122 21.3732 52.4955 19.5319 52.0671C14.5162 50.9045 9.98893 48.2043 6.58252 44.3436C3.17611 40.4828 1.06074 35.6545 0.531937 30.5331C0.492155 30.1372 0.611247 29.7418 0.863015 29.4338C1.11478 29.1257 1.4786 28.9303 1.87444 28.8906C2.27027 28.8508 2.6657 28.9699 2.97373 29.2216C3.28176 29.4734 3.47716 29.8372 3.51694 30.2331C3.89541 33.8961 5.19983 37.4025 7.3074 40.4222C9.41497 43.442 12.2564 45.8757 15.5641 47.4943C18.8718 49.1129 22.537 49.8631 26.2146 49.6743C29.8923 49.4855 33.4614 48.3639 36.5859 46.4151C41.467 43.3692 44.9381 38.5091 46.2358 32.9039C47.5335 27.2987 46.5513 21.4076 43.5054 16.5266C40.4596 11.6455 35.5994 8.17435 29.9943 6.8767C24.3891 5.57904 18.498 6.56118 13.6169 9.60706L10.3349 11.6561L17.3639 12.3711C17.7458 12.4106 18.098 12.5951 18.348 12.8866C18.5979 13.178 18.7266 13.5542 18.7075 13.9377C18.6884 14.3211 18.523 14.6827 18.2453 14.9478C17.9676 15.213 17.5989 15.3616 17.2149 15.3631C17.1638 15.3634 17.1127 15.3607 17.0619 15.3551L5.66994 14.2001C5.64194 14.2001 5.61594 14.1881 5.58794 14.1841C5.53269 14.1757 5.47795 14.1644 5.42394 14.1501C5.39094 14.1411 5.35794 14.1311 5.32394 14.1201C5.31594 14.1201 5.30794 14.1201 5.29994 14.1201C5.29194 14.1201 5.27294 14.1061 5.25894 14.1001C5.22237 14.0858 5.18665 14.0694 5.15194 14.0511C5.12194 14.0371 5.09294 14.0221 5.06394 14.0051L4.99994 13.9531C4.96994 13.9331 4.94094 13.9111 4.91194 13.8881C4.88294 13.8651 4.86094 13.8491 4.83694 13.8281C4.81294 13.8071 4.79094 13.7871 4.76994 13.7651C4.74894 13.7431 4.72494 13.7171 4.70294 13.6921C4.68094 13.6671 4.65994 13.6431 4.63994 13.6171C4.61994 13.5911 4.59894 13.5621 4.57994 13.5331C4.57194 13.5211 4.56094 13.5111 4.55294 13.4981C4.54494 13.4851 4.53994 13.4691 4.53194 13.4561C4.52394 13.4431 4.50094 13.4011 4.48594 13.3721C4.47094 13.3431 4.45594 13.3071 4.44294 13.2721C4.42994 13.2371 4.41794 13.2131 4.40794 13.1831C4.39794 13.1531 4.38994 13.1291 4.38294 13.1011C4.37594 13.0731 4.36594 13.0311 4.35894 12.9961C4.35194 12.9611 4.34494 12.9291 4.34094 12.8961C4.33694 12.8631 4.33494 12.8441 4.33294 12.8171C4.33094 12.7901 4.33294 12.7451 4.33294 12.7081C4.33294 12.6711 4.33294 12.6351 4.33294 12.5981C4.33294 12.5821 4.33294 12.5671 4.33294 12.5511C4.33294 12.5351 4.33294 12.5301 4.33994 12.5191C4.33994 12.4871 4.34994 12.4541 4.35594 12.4191C4.36194 12.3841 4.37294 12.3411 4.38394 12.3031C4.39494 12.2651 4.39894 12.2481 4.40794 12.2221C4.41694 12.1961 4.41294 12.1951 4.41794 12.1821L8.37894 1.44306C8.52076 1.0754 8.80157 0.778314 9.16067 0.616023C9.51977 0.453732 9.9283 0.439271 10.298 0.575763C10.6676 0.712256 10.9688 0.988739 11.1362 1.34545C11.3037 1.70216 11.3241 2.11045 11.1929 2.48206L8.74694 9.11106L12.0289 7.06306C16.1721 4.47727 20.9889 3.17818 25.8704 3.33009C30.7519 3.482 35.4786 5.07809 39.453 7.91649C43.4273 10.7549 46.4706 14.7081 48.1981 19.2762C49.9256 23.8443 50.2596 28.8221 49.1579 33.5801V33.5801ZM15.3999 39.7171L26.0609 29.0611C26.2002 28.9217 26.3107 28.7563 26.386 28.5742C26.4613 28.3922 26.5 28.1971 26.4999 28.0001V17.1001C26.4999 16.7022 26.3419 16.3207 26.0606 16.0394C25.7793 15.7581 25.3978 15.6001 24.9999 15.6001C24.6021 15.6001 24.2206 15.7581 23.9393 16.0394C23.658 16.3207 23.4999 16.7022 23.4999 17.1001V27.3791L13.2829 37.6001C13.0311 37.8863 12.8977 38.2577 12.9099 38.6388C12.922 39.0198 13.0788 39.382 13.3484 39.6516C13.618 39.9212 13.9802 40.078 14.3612 40.0901C14.7423 40.1023 15.1137 39.9689 15.3999 39.7171Z" fill="black"/>
          </svg> 
          <p>{{ item }}</p>
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
import { mapActions, mapGetters } from "vuex";
export default {
  name: "RecentSearches",
    data() {
    return {
      recentSearches: [],
      query: null
    };
  },
  computed: {
   ...mapGetters("SearchModule", ["getQuery"]),
  },
  created() {
    this.SearchToLocalStorage()
  },
  methods: { 
    SearchToLocalStorage(){
      const query = this.getQuery
      const b = localStorage.getItem('recentSearches');
      const parsedArray = b ? JSON.parse(b) : [];
      const newA = [...parsedArray, query]
      const cleanArray = newA.filter(n => n)
      let uniq = [...new Set(cleanArray)];
      localStorage.setItem('recentSearches', JSON.stringify(uniq));
      this.recentSearches = uniq
    },
    
    ...mapActions("SearchModule", ["modifQuery"])
  
  },
};
</script>

<style lang="scss" scoped>
@import "@/assets/scss/variables/variables.scss";
.suggestion {
  padding: 0 1.2em;
  width: 30%;
   h3{
      text-align: left;
    }
  .content {
    border: none;
    height: 20%;
    margin: 2em 0;
    li {
      border: none;
      padding: 0;
      margin: 1rem 0;
    }
  }
}
  
  .recentSearch--wrapper{
   
    li{
      display: flex;
      justify-content: flex-start;
      align-items: center;

      p{
        font-size: $small-font-size;
        text-transform: capitalize;
      }

      svg{
        width: 15px;
        margin-right: 2rem;
        path{
          fill: #00788a;
        }
      }
    }
  }
</style>
